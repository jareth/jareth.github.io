# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Eleventy + Tailwind CSS portfolio website deployed via GitHub Pages.

## Eleventy Migration Status

**Branch:** `eleventy-migration`

Migration from Jekyll to Eleventy is in progress. See `eleventy-migration.xml` for full plan.

### Completed Phases
- [x] **Phase 1: Install and Configure Eleventy**
  - Installed `@11ty/eleventy`, `@11ty/eleventy-plugin-rss`, `@11ty/eleventy-navigation`
  - Created `.eleventy.js` configuration
  - Created `.eleventyignore`
  - Installed `js-yaml` for YAML data file support

### Remaining Phases
- [ ] Phase 2: Update Templates for Eleventy
- [ ] Phase 3: Update Front Matter and Data
- [ ] Phase 4: Update Build Pipeline
- [ ] Phase 5: SEO and Feed Configuration
- [ ] Phase 6: GitHub Actions Deployment
- [ ] Phase 7: Cleanup

## Build Commands

Always use `yarn run` commands instead of `npx` commands.

### Setup
```bash
yarn install
```

### Local Development
```bash
yarn run dev
```
Runs Eleventy dev server and Webpack watch in parallel. Site available at `http://localhost:8080`

### Production Build
```bash
yarn run build
```
Runs: Eleventy → Webpack (with PurgeCSS) → Eleventy (for manifest update)

### npm Scripts
- `yarn run build` - Full production build
- `yarn run build:html` - Build HTML with Eleventy
- `yarn run build:css` - Build CSS with Webpack/PurgeCSS
- `yarn run dev` - Development mode (parallel HTML + CSS watching)
- `yarn run start` - Alias for dev

## Architecture

### Asset Pipeline
Webpack compiles `assets/css/site.css` (Tailwind) → `dist/main.[hash].css`

The manifest at `_data/manifest.json` is auto-generated by Webpack and used by Eleventy layouts to reference hashed asset URLs:
```liquid
{{ manifest['main.css'] }}
```

### Content Collections
- **Projects** (`_projects/`): Portfolio items with front matter fields: `short_name`, `name`, `client`, `preview`
- **Posts** (`_posts/`): Blog posts (currently not linked in navigation)
- **Navigation**: Data-driven via `_data/navigation.yml`

### External Assets
Images and videos hosted at `https://assets.vanbone.com/` - not in this repo.

## Deployment

Push to `master` branch triggers GitHub Actions workflow (`.github/workflows/deploy.yml`):
1. Installs dependencies
2. Builds Eleventy HTML
3. Builds CSS with PurgeCSS
4. Deploys `_site/` to GitHub Pages

Both `_site/` and `dist/` are gitignored - builds happen in CI.
