# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Jekyll + Tailwind CSS portfolio website deployed via GitHub Pages.

## Eleventy Migration Status

**Branch:** `eleventy-migration`

Migration from Jekyll to Eleventy is in progress. See `eleventy-migration.xml` for full plan.

### Completed Phases
- [x] **Phase 1: Install and Configure Eleventy**
  - Installed `@11ty/eleventy`, `@11ty/eleventy-plugin-rss`, `@11ty/eleventy-navigation`
  - Created `.eleventy.js` configuration
  - Created `.eleventyignore`
  - Installed `js-yaml` for YAML data file support

- [x] **Phase 2: Update Templates for Eleventy**
  - Updated `_layouts/default.html` - environment check, data access, include syntax
  - Updated `_layouts/project.html` and `_layouts/post.html` - front matter access
  - Updated `_includes/navigation.html` - data access
  - Updated `_includes/video.html` - rewrote for Eleventy's LiquidJS
  - Updated `projects.html` and `blog.html` - collection syntax
  - Updated include syntax in 4 project files with video embeds
  - Created `_data/site.yml` (from Phase 3) - site metadata
  - Created `_projects/_projects.json` - permalink config for `/projects/[slug]/`
  - Created `_posts/_posts.json` - permalink config for `/blog/[slug]/`

### Remaining Phases
- [ ] Phase 3: Update Front Matter and Data (partially done - site.yml created)
- [ ] Phase 4: Update Build Pipeline
- [ ] Phase 5: SEO and Feed Configuration
- [ ] Phase 6: GitHub Actions Deployment
- [ ] Phase 7: Cleanup

## Build Commands

### Setup
```bash
bundle install
yarn install
```

### Local Development
```bash
yarn run watch & bundle exec jekyll serve && fg
```
Site available at `http://localhost:4000`

### Production Build (two-step process required)
```bash
JEKYLL_ENV=production bundle exec jekyll build
yarn run prod
```
PurgeCSS requires final HTML in `_site/`, so Jekyll must build first, then Webpack.

### npm Scripts
- `yarn run prod` - Production build with PurgeCSS
- `yarn run dev` - Development build
- `yarn run watch` - Development build with file watching

## Architecture

### Asset Pipeline
Webpack compiles `assets/css/site.css` (Tailwind) â†’ `dist/main.[hash].css`

The manifest at `_data/manifest.yml` is auto-generated by Webpack and used by Jekyll layouts to reference hashed asset URLs:
```liquid
{{ site.data.manifest['main.css'] }}
```

### Content Collections
- **Projects** (`_projects/`): Portfolio items with front matter fields: `short_name`, `name`, `client`, `preview`
- **Posts** (`_posts/`): Blog posts (currently not linked in navigation)
- **Navigation**: Data-driven via `_data/navigation.yml`

### External Assets
Images and videos hosted at `https://assets.vanbone.com/` - not in this repo.

## Deployment

Commit changes including `dist/` folder, push to GitHub. GitHub Pages rebuilds automatically.

**Critical:** The `dist/` folder must be committed. The `_site/` folder is gitignored.
